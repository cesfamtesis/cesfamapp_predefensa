<!DOCTYPE html>
<html lang="es">
<head>
    {% load static %}
    <meta charset="UTF-8">
    <title>Nueva contraseña · Sistema REM CESFAM</title>
    <link rel="icon" href="{% static 'favicon/rem_favicon.ico' %}">
    <link rel="shortcut icon" href="{% static 'favicon/rem_favicon.ico' %}">
    <style>
        :root {
            --primary: #1d4ed8;
            --card-bg: #ffffff;
            --text-main: #111827;
            --text-muted: #6b7280;
        }
        * { box-sizing: border-box; }
        body {
            margin: 0;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif;
            background: radial-gradient(circle at top left, #1d4ed8 0, #0f172a 45%, #020617 100%);
            color: var(--text-main);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .card {
            width: 100%;
            max-width: 420px;
            background: var(--card-bg);
            border-radius: 20px;
            box-shadow: 0 22px 45px rgba(15,23,42,0.45),
                        0 0 0 1px rgba(15,23,42,0.08);
            padding: 26px 26px 22px;
            position: relative;
            overflow: hidden;
        }
        .card::before {
            content: "";
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(56,189,248,0.12), rgba(37,99,235,0.05));
            opacity: 0.9;
            pointer-events: none;
        }
        .card-inner { position: relative; z-index: 1; }
        h1 { margin: 0 0 8px; font-size: 20px; }
        p { font-size: 14px; color: var(--text-muted); margin: 6px 0 14px; }
        .field { margin-bottom: 12px; }
        label {
            font-size: 13px;
            color: var(--text-main);
            display: block;
            margin-bottom: 4px;
        }
        input {
            width: 100%;
            padding: 9px 11px;
            border-radius: 10px;
            border: 1px solid #d1d5db;
            font-size: 13px;
            outline: none;
            background: #f9fafb;
        }
        input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 1px rgba(37,99,235,0.13),
                        0 0 0 4px rgba(191,219,254,0.7);
            background: #ffffff;
        }
        button {
            width: 100%;
            margin-top: 4px;
            padding: 10px;
            border-radius: 999px;
            border: none;
            background: linear-gradient(135deg, #1d4ed8, #0ea5e9);
            color: white;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            box-shadow: 0 10px 20px rgba(37,99,235,0.45);
        }
        .link-row { margin-top: 16px; font-size: 13px; }
        .link-row a { color: #2563eb; text-decoration: none; }
        .link-row a:hover { text-decoration: underline; }
    </style>
</head>
<body>
<div class="card">
    <div class="card-inner">
        {% if validlink %}
            <h1>Crear nueva contraseña</h1>
            <p>Ingresa tu nueva contraseña dos veces para confirmar el cambio.</p>

            <form method="post">
                {% csrf_token %}
                {{ form.as_p }}
                <button type="submit">Guardar nueva contraseña</button>
            </form>
        {% else %}
            <h1>Enlace no válido</h1>
            <p>El enlace de restablecimiento ya fue utilizado o ha caducado.</p>
            <div class="link-row">
                <a href="{% url 'accounts:password_reset' %}">Solicitar un nuevo enlace</a>
            </div>
        {% endif %}
    </div>
</div>
</body>
</html>
